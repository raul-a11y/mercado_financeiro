<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kanban Financeiro</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    height: 100vh;
    background: #eaeaea;
  }
  /* Sidebar */
  #sidebar {
    width: 220px;
    background: #2c3e50;
    color: #ecf0f1;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }
  #sidebar h2 {
    margin-top: 0;
  }
  #sidebar nav a {
    color: #bdc3c7;
    text-decoration: none;
    margin: 8px 0;
    display: block;
    padding: 6px 10px;
    border-radius: 4px;
  }
  #sidebar nav a:hover {
    background: #34495e;
    color: white;
  }

  /* Main container */
  #main {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    padding: 15px;
    box-sizing: border-box;
  }

  /* M√©tricas */
  #metrics {
    display: flex;
    justify-content: space-around;
    margin-bottom: 20px;
  }
  .metric {
    background: white;
    border-radius: 6px;
    padding: 15px;
    width: 150px;
    box-shadow: 0 0 6px rgba(0,0,0,0.1);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .metric .icon {
    font-size: 2em;
    margin-bottom: 8px;
  }
  .metric .value {
    font-size: 1.4em;
    font-weight: bold;
  }
  .metric .label {
    color: #555;
  }

  /* Kanban board */
  #kanban {
    display: flex;
    overflow-x: auto;
  }
  .column {
    border: 2px solid var(--column-color);
    border-radius: 6px;
    width: 280px;
    padding: 10px;
    margin: 0 10px;
    background: #f0f4f8;
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
  }
  .column-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }
  .column-header .icon-display {
    font-size: 1.6em;
    margin-right: 8px;
  }
  .column-header input {
    flex-grow: 1;
    font-size: 1.3em;
    font-weight: bold;
    border: none;
    background: transparent;
    cursor: default;
    padding: 0 4px;
  }
  .column-header input[readonly] {
    cursor: default;
  }
  .edit-column-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.3em;
    margin-left: 6px;
    color: #555;
    padding: 2px 6px;
    border-radius: 4px;
  }
  .edit-column-btn:hover {
    color: var(--column-color);
    background: rgba(0,0,0,0.05);
  }

  ul.task-list {
    list-style: none;
    padding: 0;
    flex-grow: 1;
    min-height: 40px;
  }
  ul.task-list li {
    background: white;
    margin-bottom: 8px;
    padding: 8px 10px;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    cursor: grab;
  }
  ul.task-list li:active {
    cursor: grabbing;
  }

  /* Adicionar tarefa bot√£o */
  #add-task-container {
    margin-top: 15px;
    display: flex;
    gap: 10px;
  }
  #new-task-text {
    flex-grow: 1;
    padding: 6px 8px;
    font-size: 1em;
  }
  #add-task-btn {
    padding: 6px 12px;
    font-size: 1em;
    background: #2196F3;
    border: none;
    border-radius: 4px;
    color: white;
    cursor: pointer;
  }
  #add-task-btn:hover {
    background: #1976d2;
  }
</style>
</head>
<body>

<div id="sidebar">
  <h2>Menu</h2>
  <nav>
    <a href="#">Dashboard</a>
    <a href="#">Portf√≥lio</a>
    <a href="#">Relat√≥rios</a>
    <a href="#">Configura√ß√µes</a>
  </nav>
</div>

<div id="main">
  <div id="metrics">
    <div class="metric">
      <div class="icon">üìà</div>
      <div class="value" id="metric-total-tasks">10</div>
      <div class="label">Tarefas Totais</div>
    </div>
    <div class="metric">
      <div class="icon">‚è≥</div>
      <div class="value" id="metric-in-progress">3</div>
      <div class="label">Em Andamento</div>
    </div>
    <div class="metric">
      <div class="icon">‚úÖ</div>
      <div class="value" id="metric-completed">5</div>
      <div class="label">Conclu√≠das</div>
    </div>
  </div>

  <div id="kanban">
    <div class="column" style="--column-color: #2196F3;" data-column-id="col1">
      <div class="column-header">
        <span class="icon-display">üìù</span>
        <input type="text" value="A Fazer" readonly />
        <button class="edit-column-btn" title="Editar etapa">‚úèÔ∏è</button>
      </div>
      <ul class="task-list" data-column-id="col1" ondragover="event.preventDefault()" ondrop="drop(event)">
        <li draggable="true" ondragstart="drag(event)">Planejar investimento</li>
        <li draggable="true" ondragstart="drag(event)">Analisar relat√≥rio Q1</li>
      </ul>
    </div>

    <div class="column" style="--column-color: #FB8C00;" data-column-id="col2">
      <div class="column-header">
        <span class="icon-display">‚è≥</span>
        <input type="text" value="Em Progresso" readonly />
        <button class="edit-column-btn" title="Editar etapa">‚úèÔ∏è</button>
      </div>
      <ul class="task-list" data-column-id="col2" ondragover="event.preventDefault()" ondrop="drop(event)">
        <li draggable="true" ondragstart="drag(event)">Monitorar a√ß√µes</li>
      </ul>
    </div>

    <div class="column" style="--column-color: #43A047;" data-column-id="col3">
      <div class="column-header">
        <span class="icon-display">‚úÖ</span>
        <input type="text" value="Conclu√≠do" readonly />
        <button class="edit-column-btn" title="Editar etapa">‚úèÔ∏è</button>
      </div>
      <ul class="task-list" data-column-id="col3" ondragover="event.preventDefault()" ondrop="drop(event)">
        <li draggable="true" ondragstart="drag(event)">Enviar relat√≥rio final</li>
        <li draggable="true" ondragstart="drag(event)">Fechar balan√ßo mensal</li>
      </ul>
    </div>
  </div>

  <div id="add-task-container">
    <input type="text" id="new-task-text" placeholder="Nova tarefa..." />
    <select id="new-task-column">
      <option value="col1">A Fazer</option>
      <option value="col2">Em Progresso</option>
      <option value="col3">Conclu√≠do</option>
    </select>
    <button id="add-task-btn">Adicionar Tarefa</button>
  </div>
</div>

<script>
  // Arrastar e soltar tarefas
  function drag(event) {
    event.dataTransfer.setData("text/plain", event.target.innerText);
    event.dataTransfer.setData("task-id", event.target.id);
    event.dataTransfer.effectAllowed = "move";
    // Opcional: para refer√™ncia, pode adicionar id √†s tarefas futuramente
  }

  function drop(event) {
    event.preventDefault();
    const taskText = event.dataTransfer.getData("text/plain");
    const targetList = event.currentTarget;
    if (!taskText) return;

    // Criar nova tarefa
    const newTask = document.createElement("li");
    newTask.textContent = taskText;
    newTask.draggable = true;
    newTask.ondragstart = drag;
    targetList.appendChild(newTask);

    // Remover original - busca no DOM, considerando que o texto pode n√£o ser √∫nico
    // (Ideal seria ter ID para tarefas)
    const allTasks = document.querySelectorAll("ul.task-list li");
    for (const task of allTasks) {
      if (task.textContent === taskText && task.parentNode !== targetList) {
        task.remove();
        break;
      }
    }

    atualizarMetricas();
  }

  // Adicionar nova tarefa via bot√£o
  document.getElementById('add-task-btn').addEventListener('click', () => {
    const taskTextInput = document.getElementById('new-task-text');
    const columnSelect = document.getElementById('new-task-column');
    const taskText = taskTextInput.value.trim();
    if (!taskText) {
      alert('Digite o nome da tarefa.');
      return;
    }
    const targetColumnId = columnSelect.value;
    const targetList = document.querySelector(`ul.task-list[data-column-id="${targetColumnId}"]`);

    const newTask = document.createElement('li');
    newTask.textContent = taskText;
    newTask.draggable = true;
    newTask.ondragstart = drag;
    targetList.appendChild(newTask);

    taskTextInput.value = '';
    atualizarMetricas();
  });

  // Atualizar m√©tricas b√°sicas
  function atualizarMetricas() {
    const total = document.querySelectorAll('#kanban ul.task-list li').length;
    document.getElementById('metric-total-tasks').textContent = total;

    const emAndamento = document.querySelectorAll('ul.task-list[data-column-id="col2"] li').length;
    document.getElementById('metric-in-progress').textContent = emAndamento;

    const concluidas = document.querySelectorAll('ul.task-list[data-column-id="col3"] li').length;
    document.getElementById('metric-completed').textContent = concluidas;
  }

  // Inicializa m√©tricas
  atualizarMetricas();

  // Editar nome da etapa ao clicar na caneta
  document.querySelectorAll('.edit-column-btn').forEach(button => {
    button.addEventListener('click', event => {
      const columnDiv = event.target.closest('.column');
      const inputName = columnDiv.querySelector('input[type=text]');
      const iconSpan = columnDiv.querySelector('.icon-display');
      const currentName = inputName.value;

      const newName = prompt('Editar nome da etapa:', currentName);
      if (newName !== null && newName.trim() !== '') {
        inputName.value = newName.trim();

        // Aqui pode salvar a altera√ß√£o na estrutura de dados ou no backend

        alert(`Nome da etapa alterado para: ${newName.trim()}`);
      }
    });
  });
</script>

</body>
</html>
